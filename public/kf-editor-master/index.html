<!DOCTYPE html>
<html>

<head>
    <title>公式编辑器</title>
    <meta charset="UTF-8">
    <meta name="renderer" content="webkit">
    <script src="dev-lib/jquery-1.11.0.min.js"></script>
    <script src="dev-lib/kitygraph.all.js"></script>
    <script src="dev-lib/kity-formula-render.all.js"></script>
    <script src="dev-lib/kity-formula-parser.all.min.js"></script>
    <script src="dev-lib/dev-define.js"></script>
    <script src="./svgUntil.js"></script>
    <script>
        inc.config({
            base: './src'
        });
    </script>
    <script src="dev-lib/exports.js"></script>
    <script src="dev-lib/start.js"></script>
    <script src="dev-lib/dev-start.js"></script>
    <!--<script src="dist/kityformula-editor.all.min.js"></script>-->
    <script>
        jQuery(function ($) {

            var factory = kf.EditorFactory.create($("#kfEditorContainer")[0], {
                render: {
                    fontsize: 40
                },
                resource: {
                    path: "resource/"
                }
            });

            factory.ready(function (KFEditor) {

                // this指向KFEditor

                this.execCommand("render", "\\placeholder");
                this.execCommand("focus");

                window.kfe = this;

            });

        });
    </script>
    <link rel="stylesheet" href="assets/styles/page.css">
    <link rel="stylesheet" href="assets/styles/base.css">
    <link rel="stylesheet" href="assets/styles/ui.css">
    <link rel="stylesheet" href="assets/styles/scrollbar.css">
</head>

<body>
    <div id="kfEditorContainer" class="kf-editor" style="width: 780px; height: 502px; top: 0px; left: 0px;"></div>
    <div class="butto"><button  onclick="topic()">&nbsp;&nbsp;确定&nbsp;&nbsp;</button></div>
</body>
<script>
    // window.onload = function () {
    //     const svg = document.getElementById("kity_svg_0");
    //     svg.setAttribute("width", 310);
    //     svg.setAttribute("height", 100);
    //     svg.setAttribute("viewBox", "-100 -40 200 85");
    // }


    function topic() {
        // svg.viewBox = "-175 -60 350 120" 310 100;
        const svg = document.getElementById("kity_svg_0");
        const width = svg.childNodes[1].getBoundingClientRect().width;
        svg.setAttribute("viewBox", "-100 -40 200 85");
        svg.setAttribute("width", width);
        svg.setAttribute("height", 100);
        // console.log(svg.childNodes[1].getBoundingClientRect().width);
        covertSVG2Image(svg, "haha", width, 100, "jpg");
    }
</script>

</html>
<style>
.butto{
    text-align: right;
    margin-top: 16px;
    margin-right: 17px;
}
.butto button{
    font-size: 15px;
    border: 0;
    border-radius: 8px;
    padding: 5px;
    background-color: #409EFF;
    color: #fff;
    cursor: pointer;
    outline: none;
}
</style>